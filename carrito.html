<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras | Nombre de tu Empresa</title>
    <style>
        /* [Tu CSS Completo va aqu√≠. Lo he mantenido tal cual lo proporcionaste, ya que es responsivo para la tabla y la estructura de dos columnas se apila correctamente en @media (max-width: 800px)] */
        
        /* ---------------------------------- */
        /* 1. Base y Contenedor */
        /* ---------------------------------- */
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f8f8;
            color: #333;
            margin: 0;
            padding: 0;
        }

    header {
    background: white; /* Cambia el fondo a blanco */
    color: #333; /* Cambia el color del texto a un gris oscuro para que se vea */
    padding: 20px 0;
    text-align: center;
    /* A√±adimos una sombra sutil para distinguirlo del fondo de la p√°gina */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); 
    margin-bottom: 30px;
        }
        .carrito-container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            display: flex; /* Usamos flexbox para dividir en dos columnas */
            gap: 30px;
            padding-bottom: 50px;
        }

        /* 2. Tabla de Productos */
        .items-carrito {
            flex: 2; /* Ocupa 2/3 del espacio */
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #tabla-productos {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            text-align: left;
        }

        #tabla-productos th, #tabla-productos td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        #tabla-productos thead th {
            background-color: #eee;
            color: #555;
            text-transform: uppercase;
            font-size: 0.9em;
        }

        .cantidad-input {
            width: 60px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
        }

        .btn-eliminar {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .btn-eliminar:hover {
            opacity: 1;
            color: red;
        }
        
        /* Nuevo: Estilo para la imagen del producto en la tabla */
        .producto-detalle img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            vertical-align: middle;
            margin-right: 10px;
        }


        /* 3. Resumen del Pedido */

        .resumen-pedido {
            flex: 1; /* Ocupa 1/3 del espacio */
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            height: fit-content; /* Para que no ocupe toda la altura */
        }

        .resumen-detalle {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }

        .resumen-detalle hr {
            margin: 15px 0;
        }

        .total-final h3 {
            color: #d9534f; /* Rojo para el total */
            font-size: 1.5em;
        }

        .btn-checkout {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #28a745; /* Bot√≥n verde de √©xito */
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }

        .btn-checkout:hover {
            background-color: #218838;
        }

        .continuar {
            text-align: center;
            margin-top: 15px;
        }

        .continuar a {
            color: #007bff;
            text-decoration: none;
        }
        
        /* 4. Adaptaci√≥n a M√≥viles (Opcional) */

        @media (max-width: 800px) {
            .carrito-container {
                flex-direction: column; 
            }
            #tabla-productos thead {
                display: none; 
            }

            #tabla-productos tr {
                display: block;
                margin-bottom: 20px;
                border: 1px solid #ccc;
                border-radius: 5px;
                padding: 10px;
            }

            #tabla-productos td {
                display: block;
                text-align: right;
                padding-left: 50%;
                position: relative;
                border-bottom: none;
            }

            #tabla-productos td:before {
                content: attr(data-label);
                position: absolute;
                left: 10px;
                width: 45%;
                padding-right: 10px;
                white-space: nowrap;
                font-weight: bold;
                text-align: left;
            }
        }

        /* --- CAMBIOS EN EL HEADER (Para posicionar) --- */
header {
    background: white; 
    color: #333; 
    padding: 10px 0; /* Reducimos el padding para hacerlo m√°s delgado */
    text-align: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); 
    margin-bottom: 30px;
}

.header-contenido {
    display: flex; 
    justify-content: right;
    align-items: center;
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
}

/* --- ESTILOS DEL LOGO --- */

.logo-contenedor {
    display: flex; 
    order: 2; 
}

.logo-peque√±o {
    width: 60px; 
    height: auto; 
    object-fit: contain;
    margin-left: 0;
    
}

/* --- ESTILOS DEL T√çTULO --- */

.titulo-pagina {
    font-size: 1.8em; 
    margin: 0;
    flex-grow: 1; 
    text-align: center; 
}


/* --- RESPONSIVE (Ajustes para M√≥viles) --- */
@media (max-width: 600px) {
    .header-contenido {
        justify-content: flex-start;
        gap: 15px;
    }
    
    .logo-peque√±o {
        width: 45px; 
    }
    
    .titulo-pagina {
        font-size: 1.3em; 
        text-align: left;
    }
}

    </style>
</head>
<body>

     <header>
      <div class="header-contenido">
        <a href="index.html" class="logo-contenedor">
            <img src="Landesign.png" alt="LANDESIGNSTORE Logo" class="logo-peque√±o">
        </a>
        
        <h1 class="titulo-pagina">Mi Carrito de Compras</h1>
      </div>
     </header>

    <main class="carrito-container">
        <section class="items-carrito">
            <h2>Productos Seleccionados</h2>
            
            <table id="tabla-productos">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Precio</th>
                        <th>Cantidad</th>
                        <th>Total</th>
                        <th></th> 
                    </tr>
                </thead>
                <tbody id="carrito-body">
                    </tbody>
            </table>
            
            <p id="carrito-vacio-msg" style="text-align: center; padding: 30px; font-size: 1.2em; display: none;">
                Tu carrito est√° vac√≠o. ¬°A√±ade productos para empezar a comprar!
            </p>

        </section>

        <section class="resumen-pedido">
            <h2>Resumen del Pedido</h2>
            <div class="resumen-detalle">
                <p>Subtotal de productos:</p>
                <p class="valor" id="subtotal">MXM 0.00</p>
            </div>
            <div class="resumen-detalle">
                <p>Costo de env√≠o:</p>
                <p class="valor" id="envio">MXM 0.00</p>
            </div>
            <hr>
            <div class="resumen-detalle total-final">
                <h3>Total a Pagar:</h3>
                <h3 class="valor" id="total-final">MXM 0.00</h3>
            </div>

            <button class="btn-checkout" id="btn-checkout">
                Pagar Ahora y Finalizar Compra
            </button>
            <p class="continuar"><a href="index.html">üõçÔ∏è Continuar Comprando</a></p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Nombre de tu Empresa. | Precios sin IVA incluido.</p>
    </footer>
    
 <script>

    // L√ìGICA DEL CARRITO (Exclusiva para carrito.html) // 

    document.addEventListener('DOMContentLoaded', function() {
        
        // Elementos del DOM donde inyectaremos o actualizaremos datos
        const cuerpoTabla = document.querySelector('#tabla-productos tbody');
        const subtotalElemento = document.getElementById('subtotal');
        const totalFinalElemento = document.getElementById('total-final');
        const costoEnvio = 0.00; // Puedes ajustar o calcular el costo de env√≠o

        // 1. FUNCI√ìN PRINCIPAL: Renderiza la tabla y actualiza el resumen
        function renderizarCarrito() {
            // A. Obtener datos del carrito desde localStorage
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            
            // Borra cualquier contenido existente en la tabla
            cuerpoTabla.innerHTML = '';
            
            let subtotalGlobal = 0;

            if (carrito.length === 0) {
                // Muestra un mensaje si el carrito est√° vac√≠o
                cuerpoTabla.innerHTML = '<tr><td colspan="5" style="text-align:center; padding: 40px;">Tu carrito est√° vac√≠o. <a href="index.html">¬°Empieza a comprar!</a></td></tr>';
            } else {
                // B. Iterar sobre los productos y crear las filas
                carrito.forEach(producto => {
                    const totalItem = producto.precio * producto.cantidad;
                    subtotalGlobal += totalItem;

                    const fila = document.createElement('tr');
                    // Usamos el 'id' del producto para referenciarlo en las acciones
                    fila.dataset.id = producto.id; 

                    fila.innerHTML = `
                        <td data-label="Producto">${producto.nombre}</td>
                        <td data-label="Precio">MXM ${producto.precio.toFixed(2)}</td>
                        <td data-label="Cantidad">
                            <input 
                                type="number" 
                                value="${producto.cantidad}" 
                                min="1" 
                                class="cantidad-input"
                                data-producto-id="${producto.id}"
                            >
                        </td>
                        <td data-label="Total" class="subtotal-item">MXM ${totalItem.toFixed(2)}</td>
                        <td><button class="btn-eliminar" data-producto-id="${producto.id}">‚ùå</button></td>
                    `;
                    cuerpoTabla.appendChild(fila);
                });
            }

            // C. Actualizar el resumen del pedido
            actualizarResumen(subtotalGlobal);

            // D. A√±adir oyentes de eventos a los nuevos elementos
            configurarEventosTabla();
        }

        // 2. FUNCI√ìN PARA ACTUALIZAR EL RESUMEN DEL PEDIDO
        function actualizarResumen(subtotal) {
            const totalPagar = subtotal + costoEnvio;
            
            subtotalElemento.textContent = `MXM ${subtotal.toFixed(2)}`;
            totalFinalElemento.textContent = `MXM ${totalPagar.toFixed(2)}`;
        }

        // 3. FUNCI√ìN PARA CONFIGURAR EVENTOS (Cambiar cantidad / Eliminar)
        function configurarEventosTabla() {
            document.querySelectorAll('.btn-eliminar').forEach(button => {
                button.addEventListener('click', eliminarProducto);
            });
            document.querySelectorAll('.cantidad-input').forEach(input => {
                input.addEventListener('change', actualizarCantidad);
            });
        }

        // 4. FUNCI√ìN PARA ELIMINAR UN PRODUCTO
        function eliminarProducto(event) {
            const id = event.currentTarget.dataset.productoId;
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            carrito = carrito.filter(item => item.id !== id);
            localStorage.setItem('carrito', JSON.stringify(carrito));
            renderizarCarrito();
        }

        // 5. FUNCI√ìN PARA ACTUALIZAR LA CANTIDAD DE UN PRODUCTO
        function actualizarCantidad(event) {
            const id = event.currentTarget.dataset.productoId;
            const nuevaCantidad = parseInt(event.target.value, 10);
            
            if (nuevaCantidad < 1 || isNaN(nuevaCantidad)) {
                event.target.value = 1;
                alert('La cantidad m√≠nima es 1.');
                return;
            }

            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            
            // Encuentra el producto y actualiza su cantidad
            const producto = carrito.find(item => item.id === id);
            if (producto) {
                producto.cantidad = nuevaCantidad;
            }

            localStorage.setItem('carrito', JSON.stringify(carrito));
            renderizarCarrito();
        }
        
        // --- Iniciar al cargar la p√°gina ---
        renderizarCarrito();
    });
</script>

</body>
</html>
